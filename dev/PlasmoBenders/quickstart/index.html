<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quickstart · PlasmoAlgorithms.jl</title><meta name="title" content="Quickstart · PlasmoAlgorithms.jl"/><meta property="og:title" content="Quickstart · PlasmoAlgorithms.jl"/><meta property="twitter:title" content="Quickstart · PlasmoAlgorithms.jl"/><meta name="description" content="Documentation for PlasmoAlgorithms.jl."/><meta property="og:description" content="Documentation for PlasmoAlgorithms.jl."/><meta property="twitter:description" content="Documentation for PlasmoAlgorithms.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PlasmoAlgorithms.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">PlasmoBenders.jl</span><ul><li><a class="tocitem" href="../introduction/">Introduction</a></li><li><a class="tocitem" href="../algorithm/">Algorithm</a></li><li class="is-active"><a class="tocitem" href>Quickstart</a><ul class="internal"><li><a class="tocitem" href="#Required-Structure"><span>Required Structure</span></a></li><li><a class="tocitem" href="#Basic-OptiGraph"><span>Basic OptiGraph</span></a></li><li><a class="tocitem" href="#BendersOptimizer-Object"><span>BendersOptimizer Object</span></a></li><li><a class="tocitem" href="#Optimizing-the-BendersOptimizer"><span>Optimizing the BendersOptimizer</span></a></li><li><a class="tocitem" href="#Querying-Solutions"><span>Querying Solutions</span></a></li></ul></li><li><a class="tocitem" href="../solver/">Solver Options</a></li><li><a class="tocitem" href="../graph_structure/">Exploiting Graph Structure</a></li><li><a class="tocitem" href="../api_docs/">API Documentation</a></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../storage_tutorial/">Storage Operation</a></li><li><a class="tocitem" href="../sizing_tutorial/">Equipment Sizing</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">PlasmoBenders.jl</a></li><li class="is-active"><a href>Quickstart</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quickstart</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/plasmo-dev/PlasmoAlgorithms.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/plasmo-dev/PlasmoAlgorithms.jl/blob/main/docs/src/PlasmoBenders/quickstart.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h1><p>This quickstart gives a brief overview of the functions needed for using PlasmoBenders to solve optimization problems defined in Plasmo. The example below will include a simple graph with three subproblems that we can solve with either Benders Decomposition (BD) or Nested Benders Decomposition (NBD). We will define the problem and then show how to create and solve the <code>BendersOptimizer</code> object.</p><p>Once PlasmoBenders has been installed, you can use it from a Julia session using </p><pre><code class="language-julia hljs">julia&gt; using PlasmoBenders</code></pre><p>PlasmoBenders also requires defining a graph with Plasmo, and we will need a solver for the subproblems. We will use HiGHS. These packages will also need to be loaded</p><pre><code class="language-julia hljs">julia&gt; using Plasmo, HiGHS</code></pre><h2 id="Required-Structure"><a class="docs-heading-anchor" href="#Required-Structure">Required Structure</a><a id="Required-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Required-Structure" title="Permalink"></a></h2><p>BD and NBD can exploit problem <em>structure</em>, and they require a specific graph structure in order to be applied. PlasmoBenders uses subgraphs as the subproblems, and the subgraphs must form a <em>tree structure</em>. This means that there are no cycles among the subgraphs. In other words, if you start at any subgraph <span>$i$</span> and move along the edges of the graph to any other subgraph <span>$j$</span>, you cannot return to subgraph <span>$i$</span> without traversing the same subgraphs as you did to reach subgraph <span>$j$</span>. PlasmoBenders, in constructing the <code>BendersOptimizer</code> object, will check structure and error out if the structure is not correct.</p><h2 id="Basic-OptiGraph"><a class="docs-heading-anchor" href="#Basic-OptiGraph">Basic OptiGraph</a><a id="Basic-OptiGraph-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-OptiGraph" title="Permalink"></a></h2><p>First, we will define a simple graph with 3 subgraphs. Each subgraph will serve as a subproblem of BD/NBD, and each will contain one node. The code below creates this initial graph. </p><pre><code class="language-julia hljs">using Plasmo, HiGHS, PlasmoBenders

# Define optigraphs
g = OptiGraph(); g1 = OptiGraph()
g2 = OptiGraph(); g3 = OptiGraph()

# Define problem on first OptiGraph
@optinode(g1, n)
@variable(n, x[1:2] &gt;= 0)
@constraint(n, 2 * x[1] + x[2] == 3)
@objective(n, Min, x[1] + 2 * x[2])

# Define problem on second OptiGraph
@optinode(g2, n)
@variable(n, x &gt;= 0)
@objective(n, Min, 4 * x)

# Define problem on third OptiGraph
@optinode(g3, n)
@variable(n, x &gt;= 1)
@objective(n, Min, x)

# Add these OptiGraphs as subgraphs to the overall OptiGraph, g
add_subgraph!(g, g1); add_subgraph!(g, g2); add_subgraph!(g, g3)

# Set subgraph objectives to be their node&#39;s objectives
set_to_node_objectives(g1)
set_to_node_objectives(g2)
set_to_node_objectives(g3)

# Create links between the subgraphs
@linkconstraint(g0, g1[:n][:x][2] + g2[:n][:x] == 3)
@linkconstraint(g0, g1[:n][:x][1] + g3[:n][:x] &gt;= 1)</code></pre><p>Here, subgraph 1 is connected to subgraphs 2 and 3 by the link constraints. Subgraphs 2 and 3 are not connected to each other</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>PlasmoBenders currently only works with the <code>Min</code> objective sense for subgraphs. If your subgraphs have Maximizations for objectives, it is recommended that you reformulate your objective so that <span>$\max f(x)$</span> becomes <span>$\min -f(x)$</span>.</p></div></div><h2 id="BendersOptimizer-Object"><a class="docs-heading-anchor" href="#BendersOptimizer-Object">BendersOptimizer Object</a><a id="BendersOptimizer-Object-1"></a><a class="docs-heading-anchor-permalink" href="#BendersOptimizer-Object" title="Permalink"></a></h2><p>The <code>BendersOptimizer</code> object updates the subgraphs to have the required cost-to-go variables and variable copies (fixed from previous stages). The constructor requires two arguments: 1) the overall graph and 2) the subgraph that will serve as the &quot;root&quot; subgraph. The root subgraph is the &quot;master&quot; problem for BD or the first stage problem for NBD. The <code>BendersOptimizer</code> constructor also supports several other key word arguments that are oulined in a separate page of the documentation. These include things like the maximum number of iterations, the convergence tolerance, or whether to use certain other options (e.g., regularization) within the solver. </p><p>Before creating the <code>BendersOptimizer</code> object, we note that each subgraph requires a solver set on it. We will use HiGHS below, and we will set the output flag solver option to be <code>false</code> (this reduces the overall output and makes the BendersOptimizer output more readable). We can either set the solver manually, or we can pass the solver to the <code>BendersOptimizer</code> function using the keyward <code>solver</code>. To set the solver manually, we do</p><pre><code class="language-julia hljs">solver = optimizer_with_attributes(HiGHS.Optimizer, &quot;output_flag&quot; =&gt; false)
set_optimizer(g1, solver)
set_optimizer(g2, solver)
set_optimizer(g3, solver)</code></pre><p>We can now call the <code>BendersOptimizer</code> function (and if we have not set the solver, we can do so when calling this function).</p><pre><code class="language-julia hljs">solver = optimizer_with_attributes(HiGHS.Optimizer, &quot;output_flag&quot; =&gt; false)
benders_opt = BendersOptimizer(g, g1, solver = solver)</code></pre><p>Here, <code>benders_opt</code> is the optimizer object. It includes several attributes, including the upper and lower bounds at each iteration, solver options, a mapping of complicating variables to their subproblems, and dual and primal information from each iteration. </p><p>Because PlasmoBenders requires a tree structure, we can actually set <em>any</em> subgraph as the root graph. Setting <code>g1</code> as the root graph results in two stages (<code>g1</code> in stage 1 and <code>g2</code> and <code>g3</code> in stage 2), but we could instead solve this problem with three stages by setting either <code>g2</code> or <code>g3</code> as the root graph by changing the second argument in the <code>BendersOptimizer</code> function in the code above. </p><h2 id="Optimizing-the-BendersOptimizer"><a class="docs-heading-anchor" href="#Optimizing-the-BendersOptimizer">Optimizing the BendersOptimizer</a><a id="Optimizing-the-BendersOptimizer-1"></a><a class="docs-heading-anchor-permalink" href="#Optimizing-the-BendersOptimizer" title="Permalink"></a></h2><p>The <code>BendersOptimizer</code> object can be solved directly after initialization by calling <code>JuMP.optimize!</code>. This function has been extended from JuMP to solve the <code>BendersOptimizer</code> object. The solution approach includes performing the forward and backward pass</p><pre><code class="language-julia hljs">JuMP.optimize!(benders_opt)</code></pre><h2 id="Querying-Solutions"><a class="docs-heading-anchor" href="#Querying-Solutions">Querying Solutions</a><a id="Querying-Solutions-1"></a><a class="docs-heading-anchor-permalink" href="#Querying-Solutions" title="Permalink"></a></h2><p>PlasmoBenders.jl provides API functions for querying solutions and information from the <code>BendersOptimizer</code> object. Many of these are extended from JuMP. To query the objective, value, we can use</p><pre><code class="language-julia hljs">JuMP.objective_value(benders_opt)</code></pre><p>This returns the best upper bound. If PlasmoBenders has not converged to the requested tolerance, it will still return the best upper bound it has yet found. The lower bound can be queried by calling</p><pre><code class="language-julia hljs">JuMP.dual_objective_value(benders_opt)</code></pre><p>This returns the value of the lower bound. In the case of MIP problems, it is possible that there is a MIP gap and that certain tolerances cannot be reached. To see the relative gap between the lower and upper bound (i.e., the absolute value of the difference between the upper and lower bounds, normalized by the upper bound), you can call</p><pre><code class="language-julia hljs">relative_gap(benders_opt)</code></pre><p>In addition, there is functionality for querying the solution corresponding to the best upper bound. Individual variable values can be queried by calling</p><pre><code class="language-julia hljs">JuMP.value(benders_opt, var)</code></pre><p>where <code>var</code> is the variable reference. Variables can be queried from the graph by pointing to the node and then pointing to the variable reference. For instance, we can query <code>x[1]</code> from <code>g1</code> by calling <code>g1[:n][:x][1]</code>. In addition, we note that the <code>JuMP.value</code> function can normally take a single argument of a variable, but the extension we provide requires two arguments, with the first argument specifying the <code>BendersOptimizer</code> object. To query the solutions for a vector of variables, you can call</p><pre><code class="language-julia hljs">JuMP.value(benders_opt, vars)</code></pre><p>where <code>vars</code> is a vector of variables, such as <code>all_variables(g)</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>PlasmoBenders currently does not create a copy of the graph that is passed to the optimizer. This means that the user is discouraged from building the <code>BendersOptimizer</code> object and then altering the problem structure. In addition, if a user creates the <code>BendersOptimizer</code> object and then tries to optimize the graph or add to the graph, it may have unexpected solutions because of the addition of the cost-to-go variables and additional linking constraints. If the graph needs to be altered and the <code>BendersOptimizer</code> re-solved, it is recommended that the original graph be recreated and a new <code>BendersOptimizer</code> object built. </p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../algorithm/">« Algorithm</a><a class="docs-footer-nextpage" href="../solver/">Solver Options »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 4 February 2025 21:47">Tuesday 4 February 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
